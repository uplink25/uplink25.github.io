<!DOCTYPE HTML>
<html><head><meta charset="utf-8"></head><body><script>

	
	function CoffeeMachine(power, capacity) {
		var waterAmount = 0;
		var me = this;
		var WATER_HEAT_CAPACITY = 4200;

		function getTimeToBoil() {
			return waterAmount * WATER_HEAT_CAPACITY * 80 / power;
		}

		this.setWaterAmount = function(amount) {
			if (amount < 0) {
				throw new Error("Значение должно быть положительным");
			}
			if (amount > capacity) {
				throw new Error("Нельзя залить больше, чем " + capacity);
			}

			waterAmount = amount;
		};

		this.addWater = function(addedAmount) {
			me.setWaterAmount(addedAmount + waterAmount);
			// console.log(waterAmount);
		}

		function onReady() {
			alert( 'Кофе готов!' );
		}

		this.run = function() {
			setTimeout(onReady, getTimeToBoil());
		};

	}

	var coffeeMachine = new CoffeeMachine(100000, 400);
	coffeeMachine.addWater(200);
	coffeeMachine.addWater(-300);
	coffeeMachine.addWater(350); // Нельзя залить больше, чем 400
	coffeeMachine.run();

</script></body></html>